<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">

  <title>Socket.IO stream vmstat</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style type="text/css">
    * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 12px Courrier New, Monospace; }
      #headers { list-style-type: none; margin: 0; padding: 0; }
      #headers li { padding: 2px 2px; }
      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 2px 2px; }
  </style>

  <script src="/socket.io/socket.io.js" type="text/javascript">
  </script>
  <script src="http://code.jquery.com/jquery-1.11.1.js" type="text/javascript">
  </script>
  <script type="text/javascript">
var windowLimit = 5;
$.ajax({
  dataType: "json",
  url: "/limit",
  success: function(data) {
    windowLimit = data['window-limit'];
  }
});
var socket = io();
socket.on('vmstat-panel-title', function(msg) {
		$('.panel-title').text(msg);
});
socket.on('vmstat-headers-clear', function(msg) {
		$('#headers').empty();
});
socket.on('vmstat-headers', function(msg) {
		$('#headers').append($('<li>').text(msg));
});
socket.on('vmstat-stream-out', function(msg) {
	$('#messages').prepend($('<li>').text(msg));
	if($('ul#messages li').length > windowLimit) {
		$('#messages li:last').remove();
	}
});
  </script>
</head>

<body>
<div class="panel panel-info">
  <div class="panel-heading">
    <h3 class="panel-title"></h3>
  </div>
  <div class="panel-body">
    <ul id="headers"></ul>
    <ul id="messages"></ul>
  </div>
</div>
</body>
</html>
