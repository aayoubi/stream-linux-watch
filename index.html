<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">

  <title>Socket.IO stream vmstat</title>
  <style type="text/css">
    * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 12px Courrier New, Monospace; }
      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 2px 2px; }
  </style>
  <script src="/socket.io/socket.io.js" type="text/javascript">
  </script>
  <script src="http://code.jquery.com/jquery-1.11.1.js" type="text/javascript">
  </script>
  <script type="text/javascript">
var windowLimit = 5;
$.ajax({
  dataType: "json",
  url: "/limit",
  success: function(data) {
    windowLimit = data['window-limit'];
  }
});
var socket = io();
socket.on('vmstat-out', function(msg) {
	$('#messages').prepend($('<li>').text(msg));
	if($('ul#messages li').length > windowLimit) {
		$('#messages li:last').remove();
	}
});
  </script>
</head>

<body>
  <ul id="messages"></ul>
</body>
</html>
